<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

    <package name="render" namespace="/" extends="tiles-default">
        <action name="*Link" method="{1}" class="com.exadel.friendface.actions.Link">
            <result name="friendface.welcomepage" type="tiles">friendface.welcomepage</result>
            <result name="friendface.entrance" type="tiles">friendface.entrance</result>
            <result name="friendface.registration" type="tiles">friendface.registration</result>
            <result name="friendface.infopage" type="tiles">friendface.infopage</result>
        </action>
    </package>

    <package name="root" namespace="/" extends="render">

        <!-- application welcome page -->
        <action name="welcome">
            <result>welcomeLink.action</result>
        </action>

        <!-- registration input page -->
        <action name="registration">
            <result>/WEB-INF/jsps/registration/registration.jspx</result>
        </action>

        <!-- user is not logged in: entrance -->
        <!-- user is logged in: userpage  -->
        <action name="entrance" class="com.exadel.friendface.actions.Entrance">
            <result name="success">/WEB-INF/jsps/entrance/entrance.jspx</result>
            <result name="error">/WEB-INF/jsps/infopages/infopage.jspx</result>
        </action>

        <!-- there were no errors during registration: registration succeed page -->
        <!-- there were some errors (validation): back to input page -->
        <action name="register" class="com.exadel.friendface.actions.Register">
            <result name="success">/WEB-INF/jsps/infopages/infopage.jspx</result>
            <result name="input">/WEB-INF/jsps/registration/registration.jspx</result>
            <result name="error">/WEB-INF/jsps/welcomepage/welcomepage.jspx</result>
        </action>

        <!-- no errors: userpage -->
        <!-- otherwise: back to input page or to registration -->
        <action name="login" class="com.exadel.friendface.actions.Login">
            <result name="success">/WEB-INF/jsps/infopages/infopage.jspx</result>
            <result name="input">/WEB-INF/jsps/entrance/entrance.jspx</result>
            <result name="error">/WEB-INF/jsps/welcomepage/welcomepage.jspx</result>
        </action>
    </package>

</struts>
